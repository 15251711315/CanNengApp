(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/history/history"],{"07ea":function(t,e,n){"use strict";n.r(e);var a=n("b2f1"),i=n("1c92");for(var o in i)"default"!==o&&function(t){n.d(e,t,function(){return i[t]})}(o);n("af6f");var s,r=n("f0c5"),l=Object(r["a"])(i["default"],a["b"],a["c"],!1,null,null,null,!1,a["a"],s);e["default"]=l.exports},"1ab3":function(t,e,n){"use strict";(function(t){n("986c"),n("921b");a(n("66fd"));var e=a(n("07ea"));function a(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,n("6e42")["createPage"])},"1c92":function(t,e,n){"use strict";n.r(e);var a=n("6935"),i=n.n(a);for(var o in a)"default"!==o&&function(t){n.d(e,t,function(){return a[t]})}(o);e["default"]=i.a},"3bd0":function(t,e,n){},6935:function(t,e,n){"use strict";(function(t,a){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=function(){return n.e("components/back").then(n.bind(null,"1898"))},o={data:function(){return{pageName:"历史数据",pageNameFlag:1,backShowFlag:0,tabNum:1,page:1,num:20,scrollHeight:"",terminalStatus:55,lineInfo:{lineName:"暂无默认监测点，请选择",lineIndex:""},statisticsList:[],scrollFlag:!0,roleCode:1,startDate:"",endDate:"",startDateMills:"",endDateMills:""}},methods:{scrollH:function(){var e=this,n=t.getSystemInfoSync(),a=n.windowWidth,i=750/a,o=n.windowHeight,s=n.statusBarHeight;e.scrollHeight=parseInt((o-s)*i-410)+"rpx"},touchEnd:function(){var t=this;t.scrollFlag=!1,setTimeout(function(){t.scrollFlag=!0},30)},changeTab:function(t){this.tabNum=t},queryDefaultLine:function(){var e=this;e.judgeLogin()&&t.request({url:e.serverUrl+"/realtimeinfo/getLineId",method:"POST",data:{userIndex:t.getStorageSync("userInfo").userId},header:{"content-type":"application/x-www-form-urlencoded"},sslVerify:!1,success:function(n){if("10000"==n.data.resultCode){var i=n.data.data;i&&(e.lineInfo=i,e.queryStatistics())}else t.showModal({title:"提示",content:"查询失败，请重试",confirmText:"重试",success:function(t){t.confirm?e.queryDefaultLine():t.cancel&&a("log","用户点击取消"," at pages\\history\\history.vue:185")}})},fail:function(){t.showModal({title:"提示",content:"网络或服务器异常，请稍后再试",showCancel:!1,success:function(t){t.confirm?a("log","用户点击确定"," at pages\\history\\history.vue:198"):t.cancel&&a("log","用户点击取消"," at pages\\history\\history.vue:200")}})}})},queryStatistics:function(){var e=this;t.request({url:e.serverUrl+"/statistics/statistics",method:"POST",data:{lineIndex:e.lineInfo.lineIndex,startTime:e.startDateMills,endTime:e.endDateMills,page:e.page++,num:e.num},header:{"content-type":"application/x-www-form-urlencoded"},sslVerify:!1,success:function(n){if("10000"==n.data.resultCode){var i=n.data.data;if(null!=i&&void 0!=i&&""!=i&&i!=[]){for(var o=0;o<i.length;o++)i[o].showTime=e.formatTime(i[o].time);e.statisticsList=e.statisticsList.concat(i)}}else t.showModal({title:"提示",content:"查询失败，请重试",confirmText:"重试",success:function(t){t.confirm?e.queryStatistics():t.cancel&&a("log","用户点击取消"," at pages\\history\\history.vue:242")}})},fail:function(){t.showModal({title:"提示",content:"网络或服务器异常，请稍后再试",showCancel:!1,success:function(t){t.confirm?a("log","用户点击确定"," at pages\\history\\history.vue:255"):t.cancel&&a("log","用户点击取消"," at pages\\history\\history.vue:257")}})}})},chooseLine:function(){var e=this;t.navigateTo({url:"../chooseLine/chooseLine"}),t.$on("lineInfoSelect",function(t){e.lineInfo=t,e.page=1,e.statisticsList=[],e.queryStatistics()}),t.$on("lineInfoQuery",function(t){e.lineInfo=t,e.page=1,e.statisticsList=[],e.queryStatistics()})},jumpToDataIntegrityDetails:function(){var e=t.getStorageSync("userInfo"),n=e.roleCode;0==n?t.navigateTo({url:"../dataIntegrityDetails/dataIntegrityDetails"}):t.showModal({title:"提示",content:"您暂无权限查看",showCancel:!1})},jumpToTerminalStatus:function(){var e=t.getStorageSync("userInfo"),n=e.roleCode;0==n?t.navigateTo({url:"../terminalStatus/terminalStatus"}):t.showModal({title:"提示",content:"您暂无权限查看",showCancel:!1})},jumpToTerminalHistory:function(e){var n=this;t.navigateTo({url:"../terminalHistory/terminalHistory?lineInfo="+JSON.stringify(n.lineInfo)+"&timeID="+e})},jumpToCondition:function(){var e=this;t.navigateTo({url:"../condition/condition?lineInfo="+JSON.stringify(e.lineInfo)+"&startDate="+e.startDate+"&endDate="+e.endDate+"&startDateMills="+e.startDateMills+"&endDateMills="+e.endDateMills+"&chooseDateTypeFlag=0&&chooseDateFlag=1&chooseLineFlag=1"}),t.$once("doQueryInfo",function(t){e.startDate=t.startDate,e.endDate=t.endDate,e.startDateMills=t.startDateMills,e.endDateMills=t.endDateMills,e.lineInfo=t.lineInfo,e.page=1,e.statisticsList=[],e.queryStatistics()})}},components:{back:i},onLoad:function(){var t=this;t.scrollH(),t.endDate=t.formatTime(new Date),t.startDate=t.endDate.substring(0,8)+"01",t.startDateMills=Date.parse(t.startDate.replace(/-/g,"/")),t.endDateMills=Date.parse(t.endDate.replace(/-/g,"/"))+86399999,t.queryDefaultLine()}};e.default=o}).call(this,n("6e42")["default"],n("0de9")["default"])},af6f:function(t,e,n){"use strict";var a=n("3bd0"),i=n.n(a);i.a},b2f1:function(t,e,n){"use strict";var a,i=function(){var t=this,e=t.$createElement;t._self._c},o=[];n.d(e,"b",function(){return i}),n.d(e,"c",function(){return o}),n.d(e,"a",function(){return a})}},[["1ab3","common/runtime","common/vendor"]]]);