(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/terminalStatus/terminalStatus"],{"145c":function(e,t,n){"use strict";var r={"uni-calendar":()=>Promise.all([n.e("common/vendor"),n.e("components/uni-calendar/uni-calendar")]).then(n.bind(null,"3785"))},a=function(){var e=this,t=e.$createElement;e._self._c},o=[];n.d(t,"b",function(){return a}),n.d(t,"c",function(){return o}),n.d(t,"a",function(){return r})},"1bc4":function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n("36e0"));function a(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}var o=function(){return n.e("components/back").then(n.bind(null,"1898"))},i=function(){return Promise.all([n.e("common/vendor"),n.e("components/uni-calendar/uni-calendar")]).then(n.bind(null,"3785"))},c=function(){return Promise.all([n.e("common/vendor"),n.e("components/mpvue-echarts/src/echarts")]).then(n.bind(null,"b92b"))},u={data:function(){return{pageNameFlag:1,pageName:"终端状态详情",startDate:"",endDate:"",picHeight:"",option:{},devStatus:{},timeEnd:"",timeStart:"",comError:"",onlineRatez:"",errorFlag:0,srollHeight:""}},methods:{chooseDate:function(){this.$refs.calendar.open()},confirm:function(e){var t=this,n=e.range.before,r=e.range.after,a=parseInt(n.replace("-","").replace("-","")),o=parseInt(r.replace("-","").replace("-",""));o>a?(t.startDate=n,t.endDate=r):(t.startDate=r,t.endDate=n)},getDevStatus:function(){var t=this;t.judgeLogin()&&e.request({url:t.serverUrl+"/dataIntegrity/getDevStatus",method:"POST",data:{userId:e.getStorageSync("userInfo").userId},header:{"content-type":"application/x-www-form-urlencoded"},sslVerify:!1,success:function(n){if(e.hideLoading(),"10000"==n.data.resultCode){var r=n.data,a=n.data.data;t.timeStart=t.formatTime(r.timeStart),t.timeEnd=t.formatTime(r.timeEnd),t.comError=r.comError+"",t.onlineRatez=r.onlineRatez+"",t.devStatus=a;for(var o=[],i=[],c=0;c<a.length;c++)a[c].showTime=t.formatTime_second(a[c].timeId),o.push(a[c].devName),i.push(a[c].onlineRate);t.drawPic(o,i)}else e.hideLoading(),t.errorFlag=1},fail:function(){e.hideLoading(),t.errorFlag=1}})},drawPic:function(t,n){var a=this;a.option={grid:{width:"55%",left:"35%"},xAxis:{name:"在线率(%)",type:"value",nameGap:30,nameLocation:"center",max:100,axisLabel:{margin:10}},yAxis:{type:"category",inverse:!0,name:"监测点名称",nameLocation:"start",data:t,axisLabel:{interval:0,fontsize:3,formatter:function(e){return e.length>9?e.substring(0,8)+"...":e}}},series:{type:"bar",label:{normal:{show:!0,position:"right"}},data:n,itemStyle:{color:"#58C1FF",position:"top"},barWidth:"90%"}};var o=e.getSystemInfoSync(),i=o.windowWidth,c=o.windowHeight,u=750/i,s=o.statusBarHeight,l=50*t.length+50;a.srollHeight=parseInt((c-s)*u-300)+"rpx",a.picHeight=l*u+"rpx";var d=a.$refs.lineChart.canvas;r.setCanvasCreator(function(){return d});var f=r.init(d,null,{width:i,height:l});d.setChart(f),f.setOption(a.option),a.$refs.lineChart.setChart(f),e.hideLoading()},retry:function(){this.getDevStatus()}},onLoad:function(){e.showLoading({mask:!0})},onReady:function(){var e=this;e.getDevStatus()},components:{back:o,uniCalendar:i,mpvueEcharts:c}};t.default=u}).call(this,n("6e42")["default"])},"50ce":function(e,t,n){"use strict";(function(e){n("986c"),n("921b");r(n("66fd"));var t=r(n("fb21"));function r(e){return e&&e.__esModule?e:{default:e}}e(t.default)}).call(this,n("6e42")["createPage"])},"88c2":function(e,t,n){"use strict";n.r(t);var r=n("1bc4"),a=n.n(r);for(var o in r)"default"!==o&&function(e){n.d(t,e,function(){return r[e]})}(o);t["default"]=a.a},"9b0e":function(e,t,n){"use strict";var r=n("e7c3"),a=n.n(r);a.a},e7c3:function(e,t,n){},fb21:function(e,t,n){"use strict";n.r(t);var r=n("145c"),a=n("88c2");for(var o in a)"default"!==o&&function(e){n.d(t,e,function(){return a[e]})}(o);n("9b0e");var i,c=n("f0c5"),u=Object(c["a"])(a["default"],r["b"],r["c"],!1,null,null,null,!1,r["a"],i);t["default"]=u.exports}},[["50ce","common/runtime","common/vendor"]]]);