(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/report/report"],{"081c":function(t,e,n){"use strict";n.r(e);var a=n("8992"),o=n.n(a);for(var s in a)"default"!==s&&function(t){n.d(e,t,function(){return a[t]})}(s);e["default"]=o.a},"547b":function(t,e,n){"use strict";(function(t){n("986c"),n("921b");a(n("66fd"));var e=a(n("8adb"));function a(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,n("6e42")["createPage"])},"722d":function(t,e,n){"use strict";var a=function(){var t=this,e=t.$createElement;t._self._c},o=[];n.d(e,"a",function(){return a}),n.d(e,"b",function(){return o})},8992:function(module,exports,__webpack_require__){"use strict";(function(uni,__f__){Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _default={data:function(){return{tabNum:2,steadyDateChoose:0,transientDateChoose:0,userInfo:{},steadyDate:"周报",steadyPage:1,transientPage:1,transientDate:"周报",steadyList:[],transientList:[]}},methods:{changeTab:function(t){this.tabNum=t},steadyChangeDate:function(t){this.steadyDate=t,this.steadyChooseDate(0),"申请"!=t&&(this.steadyPage=1,this.steadyList=[],this.querySteadyList())},transientChangeDate:function(t){this.transientDate=t,this.transientChooseDate(0),this.transientPage=1,this.transientList=[],this.queryTransientList()},querySteadyList:function querySteadyList(){var that=this,reportType="";"周报"==that.steadyDate?reportType=1:"月报"==that.steadyDate?reportType=2:"申请"==that.steadyDate&&(reportType=3),uni.request({url:"https://pqmcc.com:8040/shiningCloud/report/reportList",method:"POST",data:{userId:uni.getStorageSync("userInfo").userId,systemType:2,reportType:reportType,page:that.steadyPage++,num:20},header:{"content-type":"application/x-www-form-urlencoded"},sslVerify:!1,success:function success(res){if(uni.hideLoading(),"10000"==res.data.resultCode){var list=that.addDateString(eval(res.data.data));null!=list&&void 0!=list&&""!=list&&list!=[]&&(that.steadyList=that.steadyList.concat(list))}else uni.showModal({title:"提示",content:"查询失败，请重试",confirmText:"重试",success:function(t){t.confirm?that.querySteadyList():t.cancel&&console.log(__f__("用户点击取消"," at pages\\report\\report.vue:274"))}})},fail:function(t){uni.hideLoading(),uni.showModal({title:"提示",content:"网络异常，请检查网络后重试",success:function(t){t.confirm?console.log(__f__("用户点击确定"," at pages\\report\\report.vue:287")):t.cancel&&console.log(__f__("用户点击取消"," at pages\\report\\report.vue:289"))}})}})},queryTransientList:function queryTransientList(){var that=this,reportType="";"周报"==that.transientDate?reportType=1:"月报"==that.transientDate?reportType=2:"申请"==that.transientDate&&(reportType=3),uni.request({url:"https://pqmcc.com:8040/shiningCloud/report/reportList",method:"POST",data:{userId:uni.getStorageSync("userInfo").userId,systemType:1,reportType:reportType,page:that.transientPage++,num:20},header:{"content-type":"application/x-www-form-urlencoded"},sslVerify:!1,success:function success(res){if(uni.hideLoading(),"10000"==res.data.resultCode){var list=that.addDateString(eval(res.data.data));null!=list&&void 0!=list&&""!=list&&list!=[]&&(that.transientList=that.transientList.concat(list))}else uni.showModal({title:"提示",content:"查询失败，请重试",confirmText:"重试",success:function(t){t.confirm?that.queryTransientList():t.cancel&&console.log(__f__("用户点击取消"," at pages\\report\\report.vue:336"))}})},fail:function(t){uni.hideLoading(),uni.showModal({title:"提示",content:"网络异常，请检查网络后重试",success:function(t){t.confirm?console.log(__f__("用户点击确定"," at pages\\report\\report.vue:349")):t.cancel&&console.log(__f__("用户点击取消"," at pages\\report\\report.vue:351"))}})}})},download:function(t){var e=this;uni.showLoading({title:"正在下载",mask:!0}),uni.downloadFile({url:t,success:function(t){uni.hideLoading(),200===t.statusCode?uni.saveFile({tempFilePath:t.tempFilePath,success:function(t){var e=t.savedFilePath;uni.showModal({title:"下载报告成功",content:"文档保存在：jxkj/CanNengApp/apps/"+e,showCancel:!1})},fail:function(){uni.showModal({title:"提示",content:"下载报告失败，请重试",confirmText:"重试",success:function(t){t.confirm?e.downloadReport():t.cancel&&console.log(__f__("用户点击取消"," at pages\\report\\report.vue:388"))}})}}):uni.showModal({title:"提示",content:"下载报告失败，请重试",confirmText:"重试",success:function(t){t.confirm?e.downloadReport():t.cancel&&console.log(__f__("用户点击取消"," at pages\\report\\report.vue:403"))}})},fail:function(){uni.hideLoading(),uni.showModal({title:"提示",content:"下载报告失败，请重试",confirmText:"重试",success:function(t){t.confirm?e.downloadReport():t.cancel&&console.log(__f__("用户点击取消"," at pages\\report\\report.vue:419"))}})}})},steadyChooseDate:function(t){this.steadyDateChoose=t},transientChooseDate:function(t){this.transientDateChoose=t},addDateString:function(t){for(var e=this,n=0;n<t.length;n++)t[n].dateString=e.formatTime(t[n].startTime)+"至"+e.formatTime(t[n].endTime);return t},chooseType:function(){},jumpToMyApply:function(){uni.navigateTo({url:"../myApply/myApply"})}},onLoad:function(){this.userInfo=uni.getStorageSync("userInfo"),this.querySteadyList(),this.queryTransientList()},onShow:function(){var t=this,e=uni.getStorageSync("userInfo");t.userInfo.roleCode!=e.roleCode&&(t.userInfo=e)}};exports.default=_default}).call(this,__webpack_require__("6e42")["default"],__webpack_require__("0de9")["default"])},"8adb":function(t,e,n){"use strict";n.r(e);var a=n("722d"),o=n("081c");for(var s in o)"default"!==s&&function(t){n.d(e,t,function(){return o[t]})}(s);n("f9d0");var i=n("2877"),r=Object(i["a"])(o["default"],a["a"],a["b"],!1,null,null,null);e["default"]=r.exports},"9a32":function(t,e,n){},f9d0:function(t,e,n){"use strict";var a=n("9a32"),o=n.n(a);o.a}},[["547b","common/runtime","common/vendor"]]]);